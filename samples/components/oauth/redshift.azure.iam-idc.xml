<?xml version="1.0" encoding="utf-8"?>
<pluginOAuthConfig>
  <dbclass>redshift</dbclass>
  <!-- For configs embedded in the connector package, don't prefix with "custom_". For external configs, always prefix with "custom_". -->
  <oauthConfigId>custom_redshift_azure_iam_idc</oauthConfigId>
  <clientIdDesktop>${clientID}</clientIdDesktop>
  <clientSecretDesktop>${clientSecret}</clientSecretDesktop>
  <redirectUrisDesktop>http://localhost:55556/Callback</redirectUrisDesktop>
  <redirectUrisDesktop>http://localhost:55557/Callback</redirectUrisDesktop>
  <redirectUrisDesktop>http://localhost:55558/Callback</redirectUrisDesktop>
  <redirectUrisDesktop>http://localhost:55559/Callback</redirectUrisDesktop>
  <!-- For multitenant apps use the common endpoint, for single tenant apps use the directory specific endpoint. -->
  <authUri>https://login.microsoftonline.com/${tenant}/oauth2/v2.0/authorize</authUri>
  <tokenUri>https://login.microsoftonline.com/${tenant}/oauth2/v2.0/token</tokenUri>
  <scopes>openid</scopes>
  <scopes>offline_access</scopes>
  <scopes>email</scopes>
  <!-- An example with a custom API, which was required at the time of writing for integration with AWS IAM IDC. -->
  <scopes>api://${customAPI}/Redshift</scopes>
  <capabilities>
    <entry>
      <key>OAUTH_CAP_REQUIRES_PROMPT_SELECT_ACCOUNT</key>
      <value>true</value>
    </entry>
    <entry>
      <key>OAUTH_CAP_REQUIRE_PKCE</key>
      <value>true</value>
    </entry>
    <entry>
      <key>OAUTH_CAP_PKCE_REQUIRES_CODE_CHALLENGE_METHOD</key>
      <value>true</value>
    </entry>
    <entry>
      <key>OAUTH_CAP_SUPPORTS_STATE</key>
      <value>true</value>
    </entry>
    <entry>
      <key>OAUTH_CAP_CLIENT_SECRET_IN_URL_QUERY_PARAM</key>
      <value>true</value>
    </entry>
    <entry>
      <key>OAUTH_CAP_SUPPORTS_GET_USERINFO_FROM_ID_TOKEN</key>
      <value>true</value>
    </entry>
    <!-- Depending on the Azure application, dynamic ports may not be allowed. Enable this if not allowed. -->
    <entry>
      <key>OAUTH_CAP_FIXED_PORT_IN_CALLBACK_URL</key>
      <value>true</value>
    </entry>
  </capabilities>
  <accessTokenResponseMaps>
    <entry>
      <key>ACCESSTOKEN</key>
      <value>access_token</value>
    </entry>
    <entry>
      <key>REFRESHTOKEN</key>
      <value>refresh_token</value>
    </entry>
    <entry>
      <key>id-token</key>
      <value>id_token</value>
    </entry>
    <entry>
      <key>username</key>
      <value>email</value>
    </entry>
    <entry>
      <key>access-token-expires-in</key>
      <value>expires_in</value>
    </entry>
  </accessTokenResponseMaps>
 </pluginOAuthConfig>